--[[
    Death Ball - Sword Grading ESP Script com GUI Mobile!
    - Interface interativa, movível, minimizável, liga/desliga o ESP.
    - Mostra visualmente na tela de grading: "JOKER" (verde) ou "ESPADA" (vermelho) sobre cada carta.
    - Compatível com executores mobile (Delta, ArceusX).
    - Não interfere na evolução, apenas exibe informações.
]]

local gui = Instance.new("ScreenGui")
gui.Name = "DeathBallGradingESP"
gui.ResetOnSpawn = false
gui.Parent = game.CoreGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 240, 0, 110)
frame.Position = UDim2.new(0.05,0,0.65,0)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.BorderSizePixel = 2
frame.Active = true
frame.Draggable = true
frame.Parent = gui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,28)
title.Position = UDim2.new(0,0,0,0)
title.Text = "Death Ball - Grading ESP"
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundTransparency = 1
title.Font = Enum.Font.SourceSansBold
title.TextSize = 19
title.Parent = frame

local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(0, 200, 0, 35)
toggle.Position = UDim2.new(0.5, -100, 0, 38)
toggle.Text = "Ligar ESP"
toggle.BackgroundColor3 = Color3.fromRGB(50,120,50)
toggle.TextColor3 = Color3.new(1,1,1)
toggle.Font = Enum.Font.SourceSansBold
toggle.TextSize = 18
toggle.Parent = frame

local minimize = Instance.new("TextButton")
minimize.Size = UDim2.new(0,32,0,28)
minimize.Position = UDim2.new(1,-34,0,0)
minimize.Text = "_"
minimize.BackgroundColor3 = Color3.fromRGB(60,60,60)
minimize.TextColor3 = Color3.new(1,1,1)
minimize.Font = Enum.Font.SourceSansBold
minimize.TextSize = 18
minimize.Parent = frame

minimize.MouseButton1Click:Connect(function()
    if frame.Size.Y.Offset > 30 then
        frame.Size = UDim2.new(0,240,0,28)
        toggle.Visible = false
    else
        frame.Size = UDim2.new(0,240,0,110)
        toggle.Visible = true
    end
end)

-- Variável global do ESP
local ESP_Ativo = false
toggle.MouseButton1Click:Connect(function()
    ESP_Ativo = not ESP_Ativo
    if ESP_Ativo then
        toggle.BackgroundColor3 = Color3.fromRGB(120,50,50)
        toggle.Text = "Desligar ESP"
        title.Text = "Grading ESP [LIGADO]"
    else
        toggle.BackgroundColor3 = Color3.fromRGB(50,120,50)
        toggle.Text = "Ligar ESP"
        title.Text = "Death Ball - Grading ESP"
        -- Limpa marcadores ao desligar
        local espGui = gui:FindFirstChild("ESP_Markers")
        if espGui then espGui:Destroy() end
    end
end)

-- Função para criar marcadores ESP sobre as cartas
local function criarMarcadoresESP()
    -- Limpa marcadores antigos
    local espGui = gui:FindFirstChild("ESP_Markers")
    if espGui then espGui:Destroy() end

    espGui = Instance.new("Folder")
    espGui.Name = "ESP_Markers"
    espGui.Parent = gui

    local evolutionGui = game:GetService("CoreGui"):FindFirstChild("EvolutionGui")
    if not evolutionGui then return end
    local cardsContainer = evolutionGui:FindFirstChild("Cards")
    if not cardsContainer then return end

    for _, card in pairs(cardsContainer:GetChildren()) do
        if card:IsA("ImageButton") then
            -- Calcula posição na tela
            local marker = Instance.new("TextLabel")
            marker.AnchorPoint = Vector2.new(0.5, 1)
            marker.Size = UDim2.new(0, 70, 0, 24)
            marker.BackgroundTransparency = 0.6
            marker.Font = Enum.Font.SourceSansBold
            marker.TextSize = 16
            marker.TextStrokeTransparency = 0.3
            marker.TextStrokeColor3 = Color3.new(0,0,0)
            marker.Parent = espGui

            -- Identifica carta da espada
            if card:FindFirstChild("IsSword") and card.IsSword.Value == true then
                marker.Text = "ESPADA"
                marker.BackgroundColor3 = Color3.fromRGB(200,40,40)
                marker.TextColor3 = Color3.new(1,0.5,0.5)
            else
                marker.Text = "JOKER"
                marker.BackgroundColor3 = Color3.fromRGB(40,180,40)
                marker.TextColor3 = Color3.new(0.7,1,0.7)
            end

            -- Sincroniza posição do marcador com a carta
            spawn(function()
                while ESP_Ativo and card.Parent == cardsContainer do
                    local absPos = card.AbsolutePosition
                    local absSize = card.AbsoluteSize
                    marker.Position = UDim2.new(0, absPos.X + absSize.X/2, 0, absPos.Y)
                    wait(0.1)
                end
                marker:Destroy()
            end)
        end
    end
end

-- Loop contínuo do ESP
spawn(function()
    while true do
        if ESP_Ativo then
            criarMarcadoresESP()
        end
        wait(0.4)
    end
end)

print("Death Ball Sword Grading ESP Script mobile GUI carregada.")
